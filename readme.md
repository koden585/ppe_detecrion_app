# Приложение для детекции СИЗ

## Описание
Это веб-приложение на основе Flask для детекции средств индивидуальной защиты (СИЗ), таких как каски и спецодежда, на изображениях с использованием модели YOLOv8. Приложение состоит из двух частей:
- **REST-API**: позволяет загружать изображения и получать результаты детекции в формате JSON.
- **Веб-интерфейс**: предоставляет удобный интерфейс для загрузки изображений и просмотра результатов с визуализацией bounding boxes.

## Возможности
- Детекция людей и их СИЗ (касок и спецодежды) с использованием моделей YOLOv8.
- REST-API эндпоинт `/api/detect` для программного доступа.
- Веб-интерфейс с формой для загрузки изображений и отображением результатов в виде таблицы и обработанного изображения.
- Стилизация с использованием Bootstrap и пользовательского CSS.
- Модульная архитектура с разделением на модели, маршруты и утилиты.
- Документация API в формате OpenAPI/Swagger (`openapi.yaml`).

## Требования
- Python 3.8 или выше
- Зависимости, указанные в `requirements.txt`
- Файлы моделей YOLOv8: `yolov8s.pt` и `ppe_detector.pt`

## Установка
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Разместите файлы моделей:
   - Скопируйте `yolov8s.pt` и `ppe_detector.pt` в папку `app/models/`.
   - Файл `yolov8s.pt` можно скачать из [репозитория Ultralytics YOLOv8](https://github.com/ultralytics/ultralytics).
3. Убедитесь, что папка `app/static/uploads/` существует (создаётся автоматически при запуске).

## Запуск приложения
1. Запустите сервер Flask:
   ```bash
   python main.py
   ```
2. Откройте приложение:
   - Веб-интерфейс: `http://localhost:5000`
   - REST-API: `http://localhost:5000/api/detect`
3. Используйте веб-интерфейс для загрузки изображений или отправляйте POST-запросы к API с файлом изображения.

## Структура проекта
```
ppe_detection_app/
├── app/
│   ├── __init__.py            # Инициализация приложения Flask
│   ├── models/
│   │   └── yolo_detector.py   # Логика модели YOLOv8
│   ├── routes/
│   │   ├── api.py             # Эндпоинты REST-API
│   │   └── web.py             # Маршруты веб-интерфейса
│   ├── templates/
│   │   ├── base.html          # Базовый шаблон Jinja2
│   │   └── index.html         # Шаблон главной страницы
│   ├── static/
│   │   ├── css/
│   │   │   └── style.css      # Пользовательские стили
│   │   └── uploads/           # Папка для загруженных изображений
│   └── utils/
│       └── image_processing.py # Утилиты для обработки изображений
├── openapi.yaml               # Документация API
├── requirements.txt           # Зависимости
├── readme.md                  # Документация проекта
└── main.py                    # Точка входа приложения
```

## Документация API
См. файл `openapi.yaml` для спецификации API в формате OpenAPI/Swagger. Вы можете просмотреть его с помощью инструментов, таких как Swagger UI, или импортировать в Postman.

## Примечания
- Убедитесь, что файлы `yolov8s.pt` и `ppe_detector.pt` находятся в `app/models/` перед запуском.
- Приложение поддерживает изображения в форматах JPG, JPEG и PNG.
- Максимальный размер файла — 16 МБ (настраивается в `app/__init__.py`).
- Для тестирования API в браузере используйте инструменты вроде Swagger UI, Postman или кастомную форму (`test_api.html`).

## Возможные улучшения
- Добавить авторизацию для защиты API и веб-интерфейса.
- Сохранять результаты детекции в базе данных с использованием SQLAlchemy.
- Поддержка обработки видео для детекции в реальном времени.
- Расширить API дополнительными эндпоинтами (например, для получения списка обработанных изображений).

## Лицензия
MIT